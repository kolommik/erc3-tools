# ERC3 Tools

Утилиты для работы с ERC3 API.

## Описание

Набор инструментов для управления сессиями ERC3 через Python API.

## Требования

- Python 3.11+
- Доступ к приватному репозиторию пакетов ERC3

## Установка

### 1. Клонирование репозитория

```bash
git clone <repository-url>
cd erc3-tools
```

### 2. Создание виртуального окружения (рекомендуется)

```bash
python -m venv venv
source venv/bin/activate  # Linux/macOS
# или
venv\Scripts\activate     # Windows
```

### 3. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 4. Настройка переменных окружения

Скопируйте пример файла конфигурации:

```bash
cp .env.sample .env
```

Отредактируйте файл `.env` и укажите ваш API ключ:

```env
ERC3_API_KEY=key-your-api-key-here
```

## Утилиты

### close_all_opened_sessions.py

Утилита для закрытия всех открытых сессий ERC3.

#### Функционал

При закрытии сессии скрипт автоматически:
1. Находит все незавершённые задачи в сессии
2. Завершает все задачи
3. Закрывает открытые сессии

#### Режим просмотра (dry run)

Запуск без флагов показывает, какие сессии будут закрыты:

```bash
python close_all_opened_sessions.py
```

#### Фактическое закрытие сессий

```bash
python close_all_opened_sessions.py --force
```

#### Аргументы командной строки

| Аргумент | Описание |
|----------|----------|
| (без аргументов) | Режим dry run — показывает сессии без закрытия |
| `--force` | Выполняет фактическое закрытие всех открытых сессий |
| `-h`, `--help` | Показывает справку по использованию |

## Структура проекта

```
.
├── close_all_opened_sessions.py  # Утилита закрытия сессий
├── requirements.txt              # Зависимости проекта
├── .env.sample                   # Пример файла конфигурации
├── .env                          # Переменные окружения (создаётся вручную)
├── .gitignore                    # Исключения для Git
└── README.md                     # Документация
```

## Зависимости

- `erc3>=1.0.8` - официальный клиент ERC3 API
- `python-dotenv` - загрузка переменных окружения
